// params: x    y     dx    target rounds const_fee *OR*  y     x    dy     target rounds const_fee
// params: cash token dcash target rounds const_fee *OR*  token cash dtoken target rounds const_fee
let trade_params : (nat * nat * nat * nat * int * (nat * nat)) list = [
    (1_000_000_000_000n, 1_000_000_000_000n, 100_000_000n,    281474976710656n,  4, (995n, 1_000n)) ; // defaults
    (98988405803026n,    18107958507862n,    3872615655458n,  882374982364577n,  4, (995n, 1_000n)) ;
    (5968332879319n,     96518715184612n,    5791449894194n,  2000600708888996n, 4, (995n, 1_000n)) ;
    (77013792563896n,    60030319108034n,    49456121069247n, 1818453222073915n, 4, (995n, 1_000n));
    (79878307371134n,    330071995931n,      79539119798n,    212882757369281n,  4, (995n, 1_000n));
    (19129894134020n,    88890160519398n,    15340980582864n, 2289927659660348n, 4, (995n, 1_000n));
    (54815512056117n,    17156462024441n,    3270886499952n,  1740871442237487n, 4, (995n, 1_000n));
    (77196838456986n,    56014864699859n,    10375264739973n, 561871567111350n,  4, (995n, 1_000n));
    (84986996197047n,    74925109005180n,    7848734717785n,  2055810841358608n, 4, (995n, 1_000n)); 
    (39238529119811n,    4431969006897n,     3277329447805n,  1176509953109770n, 4, (995n, 1_000n)); 
    (72824337535112n,    93155266049234n,    19340115180022n, 1975255336407586n, 4, (995n, 1_000n));
    (1601166716353n,     23365080598422n,    1104448297244n,  2217527413085225n, 4, (995n, 1_000n));
    (41205274575938n,    7416464806566n,     6460072113915n,  1312988108900737n, 4, (995n, 1_000n));
    (45180792290134n,    49245864335977n,    25265846390542n, 235018967641100n,  4, (995n, 1_000n));
    (56416934617162n,    74828019692976n,    27573522175550n, 1959208962878433n, 4, (995n, 1_000n));
    (56136281374594n,    67973733677187n,    22349972320667n, 2066958463925712n, 4, (995n, 1_000n));
    (83728902061815n,    86823599492645n,    44654744538200n, 628704445927453n,  4, (995n, 1_000n));
    (93423127064948n,    54954880092879n,    28949506294368n, 1541643127012885n, 4, (995n, 1_000n));
    (50929825762612n,    57909000831794n,    3115287384219n,  1560616771738345n, 4, (995n, 1_000n));
    (80940595598525n,    5855269273946n,     1954870899011n,  151551483971394n,  4, (995n, 1_000n));
    (42379228503855n,    77022592890009n,    26039974887923n, 2797116864632812n, 4, (995n, 1_000n));
    (27320882505941n,    84514505359446n,    13117665118907n, 1653205123620478n, 4, (995n, 1_000n));
    (67108760677707n,    59586203623329n,    39244337293420n, 1292005383174098n, 4, (995n, 1_000n));
    (49242331273088n,    57474087276843n,    34818226780072n, 1335221432128563n, 4, (995n, 1_000n));
    (57408848812221n,    49112870767350n,    23399091512220n, 772534567228663n,  4, (995n, 1_000n));
    (89119383642242n,    39511429775451n,    20053476667366n, 1928116733152093n, 4, (995n, 1_000n));
    (37142126167146n,    71676086994427n,    7093274614847n,  147692622062161n,  4, (995n, 1_000n));
    (91306218309180n,    44268843141358n,    33036342277387n, 1563180676220121n, 4, (995n, 1_000n));
    (52562756279885n,    53145739592867n,    22074645141689n, 2377750220265438n, 4, (995n, 1_000n));
    (543657311655n,      56599084225701n,    518954122014n,   2409789127953428n, 4, (995n, 1_000n));
    (67887541222344n,    1620546396987n,     414391941996n,   704430321507828n,  4, (995n, 1_000n));
    (72907376657097n,    20043097779386n,    19367446322219n, 144721625722039n,  4, (995n, 1_000n));
    (48092891660981n,    92806820842626n,    33134092221331n, 1762040157428526n, 4, (995n, 1_000n));
    (19435851320508n,    54210567423028n,    4350795953899n,  2543611736564936n, 4, (995n, 1_000n)); 
    (71561204800718n,    88169390939880n,    31096059452621n, 777890904860510n,  4, (995n, 1_000n)); 
    (90080561815376n,    30652916413836n,    3039649754921n,  2671009830172703n, 4, (995n, 1_000n)); 
    (4296269170958n,     94600461068753n,    1807323041280n,  1063637180805282n, 4, (995n, 1_000n)); 
    (29607312689597n,    8490719604142n,     3396522823354n,  2244582881160678n, 4, (995n, 1_000n)); 
    (83413608184096n,    40215628064872n,    2894074691216n,  1155262205229888n, 4, (995n, 1_000n)); 
    (52306107095261n,    13167440455013n,    1916738303012n,  1661622471132269n, 4, (995n, 1_000n)); 
    (65276642017810n,    94930559170346n,    22019938700113n, 331888662557756n,  4, (995n, 1_000n));
    (23880359102598n,    83765998167633n,    18832098079375n, 1257988108512487n, 4, (995n, 1_000n)); 
    (12537629500511n,    67971091756746n,    6897004811648n,  1520921482630634n, 4, (995n, 1_000n)); 
    (72315128314319n,    67038559448436n,    34602296085227n, 2257510100355093n, 4, (995n, 1_000n)); 
    (10728851278134n,    59352086697447n,    8156353244468n,  1273191317991122n, 4, (995n, 1_000n)); 
    (89666772710612n,    23604642566773n,    8238891042891n,  1598821317578889n, 4, (995n, 1_000n)); 
    (98267719147993n,    89190148511832n,    46094999455492n, 2166188459278705n, 4, (995n, 1_000n)); 
    (59680379305639n,    83132247451297n,    45518371807487n, 2392418717880737n, 4, (995n, 1_000n)); 
    (7072240378216n,     8474540486965n,     6160340578120n,  265788611941632n,  4, (995n, 1_000n)); 
    (75206782170387n,    60385004676971n,    29797338982604n, 2381154553159575n, 4, (995n, 1_000n)); 
    (18231110032274n,    73410479309796n,    14717338622021n, 2618148148843863n, 4, (995n, 1_000n));
    (200n,               100n,               2000n,           562949953421312n,  4, (995n, 1_000n));
    (2000n,              2000n,              10n,             1n,                0, (995n, 1_000n)) ;
    (2000n,              2000n,              10n,             1n,               -4, (995n, 1_000n));
]

// output: tokens
let expected_tez_to_cash : nat list = [
    99999999n ; 1173018948356n ; 19539489073690n ; 10964429590086n ; 984025345n ; 15907235689290n ; 
    557763178438n ; 5223561515442n ; 2328080197112n ; 681343848914n ; 7343800373050n ; 3749971969904n ; 
    1367548467092n ; 27034127066118n ; 9777833931102n ; 7553362257179n ; 20769928868754n ; 6373668541575n ; 
    1215765646757n ; 403119416160n ; 11539676722331n ; 10493478531692n ; 10901053697539n ; 11018792465910n ; 
    8980502631801n ; 3508492052240n ; 13478328330225n ; 6566650628075n ; 6195058995402n ; 11331003553529n ; 
    29050135062n ; 9990912161382n ; 15417335605024n ; 3549055286255n ; 13519097920343n ; 424114822404n ; 
    10455233920536n ; 466465096892n ; 751453993104n ; 328571915294n ; 18855988052341n ; 15105572071508n ; 
    9290247236237n ; 8840222541265n ; 10287699638750n ; 1463394615374n ; 11684795993547n ; 14889948019368n ; 
    5640315081980n ; 6913920574744n ; 13197915825593n ; 99n ; 0n ; 0n ;
]

// output: cash
let expected_cash_to_tez : nat list = [
    99999999n ; 12344117940898n ; 957112247548n ; 63823774369672n ; 5546721008850n ; 7258551239302n ; 
    17048657734949n ; 19606274513048n ; 21147441932732n ; 13935866395686n ; 31076090984945n ; 207137971524n ; 
    26716292792294n ; 20346391336975n ; 34167157054180n ; 31940329245969n ; 55386716992312n ; 64756414975369n ; 
    7051382847344n ; 7453919092866n ; 24641267401042n ; 9562353789465n ; 51534040224470n ; 36971938497876n ; 
    36564397483236n ; 60429310096770n ; 3719568114896n ; 71835007575928n ; 33786432318991n ; 14684155121n ; 
    5024475656231n ; 16661992205692n ; 28727602948910n ; 4006916260759n ; 40432521567142n ; 19221885467065n ; 
    237038331674n ; 16979191988523n ; 10688822898835n ; 10785742135527n ; 22583979583186n ; 10841526004070n ; 
    3149700951139n ; 51204891482535n ; 3430378228265n ; 40453038579078n ; 69553805468043n ; 43466152347916n ; 
    4696655862050n ; 52160736143305n ; 7687583972395n ; 199n ; 0n ; 0n ;
]